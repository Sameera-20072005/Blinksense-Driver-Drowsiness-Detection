{% extends "base.html" %}

{% block content %}
<h1 class="mb-4"><i class="fas fa-tachometer-alt"></i> Dashboard</h1>

<div class="row mb-4">
    <div class="col-md-3">
        <div class="card status-card">
            <div class="card-body text-center">
                <i class="fas fa-exclamation-triangle fa-2x text-warning mb-2"></i>
                <h3>{{ stats.total_alerts }}</h3>
                <p class="mb-0">Total Alerts</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card alert-card">
            <div class="card-body text-center">
                <i class="fas fa-calendar-day fa-2x text-danger mb-2"></i>
                <h3>{{ stats.today_alerts }}</h3>
                <p class="mb-0">Today's Alerts</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card warning-card">
            <div class="card-body text-center">
                <i class="fas fa-clock fa-2x text-info mb-2"></i>
                <h3>{{ stats.avg_response_time }}</h3>
                <p class="mb-0">Avg Response</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card status-card">
            <div class="card-body text-center">
                <i class="fas fa-shield-alt fa-2x text-success mb-2"></i>
                <h3>{{ stats.system_status }}</h3>
                <p class="mb-0">System Status</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-chart-line"></i> Detection Activity</h5>
            </div>
            <div class="card-body">
                <canvas id="activityChart" width="400" height="200"></canvas>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-list"></i> Recent Alerts</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-warning">
                    <small>14:30 - High severity alert (3.2s)</small>
                </div>
                <div class="alert alert-info">
                    <small>12:15 - Medium severity alert (2.8s)</small>
                </div>
                <div class="alert alert-warning">
                    <small>Yesterday - High severity alert (4.1s)</small>
                </div>
                <a href="/alerts" class="btn btn-sm btn-outline-primary">View All Alerts</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('activityChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
        datasets: [{
            label: 'Drowsiness Events',
            data: [0, 1, 3, 2, 5, 1],
            borderColor: '#dc3545',
            backgroundColor: 'rgba(220, 53, 69, 0.1)',
            tension: 0.4
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
{% endblock %}